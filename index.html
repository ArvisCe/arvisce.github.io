<!doctype html>
<html lang="lv">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Svešais — Jautājumu kartītes</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<style>
  :root{
    --bg:#0f1115; --card:#171a21; --text:#eaecef; --muted:#a8b3cf;
    --accent:#6aa8ff; --accent-2:#9dff6a; --danger:#ff6a6a;
    --radius:14px; --gap:14px; --blur:8px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:radial-gradient(1200px 800px at 20% -10%,#1e222d 0%,#0f1115 60%) fixed,#0f1115;color:var(--text);
    font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,Noto Sans;
    display:flex;flex-direction:column;gap:var(--gap);align-items:center;padding:24px}
  h1{margin:0;font-size:clamp(20px,3vw,28px)}
  .sub{color:var(--muted)}
  .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  button{appearance:none;border:1px solid #2a2f3b;background:#131826;color:var(--text);
    padding:10px 12px;border-radius:10px;font-weight:600}
  button.primary{background:#102038;border-color:#365b8f}
  button.accent{background:#0f1b33;border-color:#3a7df5}
  button.danger{background:#2a1515;border-color:#5a2a2a}
  .pill{display:inline-block;border:1px solid #2a2f3b;border-radius:999px;padding:4px 10px;color:#b9c6e9;font-size:12px}
  .grid{display:grid;gap:var(--gap);grid-template-columns:repeat(2,minmax(260px,1fr));width:100%;max-width:980px}
  @media (max-width:700px){.grid{grid-template-columns:1fr}}
  .card{background:linear-gradient(180deg,#1b2030,#171a21);border:1px solid #262b36;border-radius:var(--radius);padding:16px 16px 12px}
  .name{display:flex;align-items:center;gap:10px;margin-bottom:10px;font-weight:700}
  .dot{width:10px;height:10px;border-radius:50%;background:var(--accent)}
  .spoiler{position:relative;border:1px dashed #2a2f3b;border-radius:10px;padding:14px;min-height:64px;background:rgba(18,21,28,.6)}
  .spoiler[data-revealed="false"] .spoiler-text{filter:blur(var(--blur));user-select:none}
  .spoiler[data-revealed="false"] .veil{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:#cdd7f5;font-weight:600;background:linear-gradient(180deg,rgba(12,14,18,0),rgba(12,14,18,.25));pointer-events:none}
  .row{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
  .common-box{width:100%;max-width:980px;border:1px solid #2a2f3b;border-radius:12px;padding:14px;background:linear-gradient(180deg,#141924,#11151d);display:none}
  .common-box.show{display:block}
  .common-title{font-weight:800;color:var(--accent-2);margin-bottom:6px}
  .tiny{color:var(--muted);font-size:12px}
</style>
</head>
<body>
  <h1>Svešais — Jautājumu kartītes</h1>
  <div class="sub">3 spēlētāji saņem vienu un to pašu jautājumu. 1 nejaušs spēlētājs saņem citu. Klikšķini uz savas kartītes, lai atklātu privāti.</div>

  <div class="toolbar" style="margin-top:6px">
    <span class="pill" id="round-pill">Raunds: —</span>
    <button class="primary" id="reveal-common">Parādīt kopīgo jautājumu</button>
    <button class="accent" id="new-round">Jauns raunds (bez pārlādes)</button>
    <button class="danger" id="hide-common" style="display:none">Slēpt kopīgo</button>
    <label class="pill">🔒 Vienāda veida nodrošinājums</label>
  </div>

  <section class="grid" id="cards"></section>

  <section id="common" class="common-box" aria-live="polite">
    <div class="common-title">Kopīgais jautājums</div>
    <div id="common-text"></div>
    <div class="tiny">Padoms: sākumā dodiet īsus mājienus, lai svešais būtu spiests blefot.</div>
  </section>

<script>
const PLAYER_NAMES = ["Linda","Arvis","Niks","Jasmina"];

const QUESTION_PACKS = [
  {
    topic: "Ēdienu izvēles",
    questions: [
      "Kurš auglis vasarā ir vislabākais?",
      "Kurš karstais dzēriens no rīta ir labāks?",
      "Kāds ir labākais veids, kā pagatavot olas?",
      "Kurš picas papildinājums ir pārvērtēts?"
    ]
  },
  {
    topic: "Ceļošana un vietas",
    questions: [
      "Kuru pilsētu ikvienam vajadzētu apmeklēt vismaz reizi?",
      "Pludmale vai kalni nedēļas nogalei?",
      "Kā labāk ceļot 300 km attālumu?",
      "Kurš gadalaiks ir labākais ceļošanai?"
    ]
  },
  {
    topic: "Ikdienas izvēles",
    questions: [
      "Kurš diennakts laiks ir labākais darbam?",
      "Kuru lietotni tu atver pirmo no rīta?",
      "Kurš virtuves rīks ir vislietderīgākais?",
      "Kurā veidā kartupeļi ir visgaršīgākie?"
    ]
  },
  {
    topic: "Vienkārši fakti",
    questions: [
      "Cik dienu ir nedēļā?",
      "Cik minūšu ir vienā stundā?",
      "Cik mēnešu ir gadā?",
      "Cik riteņu ir velosipēdam?"
    ]
  },
  {
    topic: "Pasaules fakti",
    questions: [
      "Kurā kontinentā atrodas Itālija?",
      "Kurš okeāns atrodas uz rietumiem no Eiropas?",
      "Kas ir Francijas galvaspilsēta?",
      "Cik kontinentu pastāv (skolas standarts)?"
    ]
  }
];

let currentRound = 1;
let commonQuestion = "";
let oddQuestion = "";
let oddIndex = -1;
let currentPackIndex = 0;

function pickTwoDifferent(arr){
  if (arr.length < 2) return [arr[0], arr[0]];
  const a = Math.floor(Math.random()*arr.length);
  let b; do { b = Math.floor(Math.random()*arr.length) } while (b===a);
  return [arr[a], arr[b]];
}

function rollRound(){
  currentPackIndex = Math.floor(Math.random()*QUESTION_PACKS.length);
  const pack = QUESTION_PACKS[currentPackIndex];
  const [q1, q2] = pickTwoDifferent(pack.questions);
  commonQuestion = q1;
  oddQuestion = q2;
  oddIndex = Math.floor(Math.random()*PLAYER_NAMES.length);
}

function makeCard(name, index){
  const card = document.createElement('div'); card.className='card';
  const head = document.createElement('div'); head.className='name';
  const dot = document.createElement('span'); dot.className='dot'; head.appendChild(dot);
  head.appendChild(Object.assign(document.createElement('div'),{textContent:name}));

  const spoiler = document.createElement('div'); spoiler.className='spoiler'; spoiler.dataset.revealed='false'; spoiler.tabIndex=0;
  const text = document.createElement('div'); text.className='spoiler-text';
  const isOdd = index===oddIndex; text.textContent = isOdd ? oddQuestion : commonQuestion;
  const veil = document.createElement('div'); veil.className='veil'; veil.textContent = "Klikšķini, lai atklātu";
  const row = document.createElement('div'); row.className='row';
  const btn = document.createElement('button'); btn.textContent = "Rādīt";
  btn.addEventListener('click',()=>{
    const revealed = spoiler.dataset.revealed==='true';
    spoiler.dataset.revealed = revealed ? 'false' : 'true';
    btn.textContent = revealed ? "Rādīt" : "Slēpt";
  });
  spoiler.addEventListener('keydown',e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); btn.click(); }});
  spoiler.addEventListener('click',e=>{ if(e.target.tagName.toLowerCase()!=='button') btn.click(); });

  row.appendChild(btn);
  spoiler.appendChild(text); spoiler.appendChild(veil);
  card.appendChild(head); card.appendChild(spoiler); card.appendChild(row);
  return card;
}

function render(){
  document.getElementById('round-pill').textContent = `Raunds: ${currentRound} — ${QUESTION_PACKS[currentPackIndex].topic}`;
  const container = document.getElementById('cards'); container.innerHTML='';
  PLAYER_NAMES.forEach((n,i)=> container.appendChild(makeCard(n,i)) );
  document.getElementById('common').classList.remove('show');
  document.getElementById('common-text').textContent='';
  document.getElementById('hide-common').style.display='none';
}

function newRound(increment=true){ if(increment) currentRound++; rollRound(); render(); }

rollRound();
render();

document.getElementById('reveal-common').addEventListener('click',()=>{
  document.getElementById('common-text').textContent = commonQuestion;
  document.getElementById('common').classList.add('show');
  document.getElementById('hide-common').style.display='inline-block';
});
document.getElementById('hide-common').addEventListener('click',()=>{
  document.getElementById('common').classList.remove('show');
  document.getElementById('hide-common').style.display='none';
});
document.getElementById('new-round').addEventListener('click',()=> newRound(true));
</script>
</body>
</html>
